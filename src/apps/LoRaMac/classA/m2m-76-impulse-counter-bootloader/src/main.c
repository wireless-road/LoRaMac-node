//******************************************************************************
//
//******************************************************************************


//******************************************************************************
// Included Files
//******************************************************************************

#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include "utilities.h"
#include "board.h"
#include "gpio.h"

//******************************************************************************
// Pre-processor Definitions
//******************************************************************************

#ifdef PRODUCTION
#define printf(fmt, ...) (0)
#endif


//******************************************************************************
// Private Types
//******************************************************************************

typedef enum _BOOTLOADER_STEP
{
  BOOTLOADER_STEP_CHECK_APP, 	// Проверка приложения
  BOOTLOADER_STEP_CHECK_UPDATE,	// Проверка необходимости обновления
  BOOTLOADER_STEP_UPDATE,		// Обновление
  BOOTLOADER_STEP_START_APP,	// Запуск приложения
  BOOTLOADER_STEP_RELOAD,		// Перезагрузка
  BOOTLOADER_STEP_RECOVERY,		// Востановление
  BOOTLOADER_STEP_ERROR,		// Неустранимая ошибка
} BOOTLOADER_STEP;
//******************************************************************************
// Private Function Prototypes
//******************************************************************************

//******************************************************************************
// Private Data
//******************************************************************************

//******************************************************************************
// Public Data
//******************************************************************************

//******************************************************************************
// Private Functions
//******************************************************************************

//******************************************************************************
// Device initialization
//******************************************************************************
static void BootloaderInit(void)
{
    BoardInitMcu( );
    BoardInitPeriph( );
}

//******************************************************************************
// Verify Destination Application
//******************************************************************************
static bool BootloaderCheckApp(void)
{

}

//******************************************************************************
// Check for updates
//******************************************************************************
static bool BootloaderCheckNeedUpdate(void)
{

}

//******************************************************************************
// Updates app
//******************************************************************************
static bool BootloaderUpdate(void)
{

}

//******************************************************************************
// Updates app
//******************************************************************************
static void BootloaderCompletionUpdate(void)
{

}


//******************************************************************************
// Start App
//******************************************************************************
static bool BootloaderStartApp(void)
{

}

//******************************************************************************
// Public Functions
//******************************************************************************

//******************************************************************************
// Main application entry point.
//******************************************************************************
int main( void )
{
	BOOTLOADER_STEP Step = BOOTLOADER_STEP_CHECK_APP;

	BootloaderInit(); // Инициализируем железо

	while(1)
	{

	}
}
